!!!
%html
  %head
    %title Chat
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html; charset=utf-8"}/
    %link{ :href => "/stylesheet.css", :media => "screen", :rel => "stylesheet", :type => "text/css" }
    %script{ :src => "http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js" }
    :javascript
      function getRandom() {
          $("#chat").load("/chat", '', callback);
      }

      function callback() {
          setTimeout("getRandom();", 1000);
      }

      $(document).ready(getRandom);

  %body
    %h2 Chat v.03
    #window
      #chat
        - haml(:chat, :layout => false)

      //%form{ :action => "/", :method => "post", :id => "form" }
      #form
        %input{:name => "message", :id => "message"}

:javascript
  $("input").focus(); 
  
  $('#message').bind('keypress', function(e) {
    if(e.keyCode==13){
      $.post("/", { message: $('#message').val() } );
      $('#message').val("");
    }
  });
